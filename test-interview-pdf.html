<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>면접관상 PDF 테스트</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <div class="interview-analysis-result-container" style="padding: 20px; background: #f8fafc;">
        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 20px; padding: 30px; color: white;">
            <h2 style="text-align: center; margin-bottom: 30px;">면접 관상 분석 결과</h2>
            
            <div style="background: rgba(255,255,255,0.1); border-radius: 15px; padding: 25px; margin-bottom: 20px;">
                <div style="margin-bottom: 25px;">
                    <h3 style="color: white; margin-bottom: 15px;">종합평가</h3>
                    <div style="background: rgba(255,255,255,0.08); padding: 20px; border-radius: 12px;">
                        <p>테스트 종합평가 내용입니다.</p>
                    </div>
                </div>

                <div style="margin-bottom: 25px;">
                    <h3 style="color: white; margin-bottom: 15px;">첫인상 분석</h3>
                    <div style="background: rgba(76, 175, 80, 0.2); padding: 20px; border-radius: 12px;">
                        <p>테스트 첫인상 분석 내용입니다.</p>
                    </div>
                </div>

                <div style="margin-bottom: 25px;">
                    <h3 style="color: white; margin-bottom: 15px;">신뢰도 평가</h3>
                    <div style="background: rgba(33, 150, 243, 0.2); padding: 20px; border-radius: 12px;">
                        <p>테스트 신뢰도 평가 내용입니다.</p>
                    </div>
                </div>
            </div>

            <button onclick="testPDF()">PDF 테스트</button>
        </div>
    </div>

    <script>
        async function testPDF() {
            console.log('PDF 생성 테스트 시작');
            
            const container = document.querySelector('.interview-analysis-result-container');
            console.log('찾은 컨테이너:', container);
            
            if (container) {
                try {
                    const canvas = await html2canvas(container, {
                        scale: 2,
                        useCORS: true,
                        backgroundColor: '#ffffff',
                        logging: true
                    });
                    
                    console.log('캔버스 생성됨:', canvas.width, 'x', canvas.height);
                    
                    const imgData = canvas.toDataURL('image/png');
                    const { jsPDF } = window.jspdf;
                    
                    const pdf = new jsPDF({
                        orientation: 'portrait',
                        unit: 'mm',
                        format: 'a4'
                    });
                    
                    const pdfWidth = pdf.internal.pageSize.getWidth();
                    const pdfHeight = pdf.internal.pageSize.getHeight();
                    
                    const imgWidth = pdfWidth - 20;
                    const imgHeight = (canvas.height / canvas.width) * imgWidth;
                    
                    pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
                    pdf.save('test-interview.pdf');
                    
                    console.log('PDF 생성 완료');
                } catch (error) {
                    console.error('PDF 생성 오류:', error);
                }
            }
        }
    </script>
</body>
</html>